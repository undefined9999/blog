(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{323:function(t,n,s){"use strict";s.r(n);var a=s(1),e=Object(a.a)({},function(){var t=this,n=t.$createElement,s=t._self._c||n;return s("div",{staticClass:"content"},[t._m(0),t._m(1),t._m(2),s("p",[t._v("在手机上浏览视频网站，能够根据用户当前使用的网络类型，在必要的时候给出提示，是一种很好的体验。")]),t._m(3),t._m(4),s("p",[t._v("这个功能还有一个用途：资源预加载。在wifi下，手机可以提前加载页面的静态资源，以此提升用户观览体验，\n在非wifi下可使用懒加载，为用户节省流量。")]),s("p",[t._v("然而，不难发现，这些都是软件外壳的API实现的，并非简单的JS实现。（一般视频在其他媒体上播放时不会弹出提示，可以猜测并未调用该环境下的JSBridge）")]),s("p",[t._v("例如在微信或微信小程序里，可以这样获取网络类型：")]),t._m(5),s("p",[t._v("实际上，HTML5已经有这样的Web API来规范这个功能：onLine和connection API。")]),s("p",[t._v("现在，手机端和PC端对前者的实现比较好，后者只有PC端的某些高级版本才支持（我用的Chrome67支持）。\n所以，如果想用纯JS在手机上实现该功能，到这里就可以关掉了😂 。。。")]),s("p",[t._v("如果还寄希望于PC端，还是可以继续看一看的😄 。")]),t._m(6),t._m(7),s("p",[t._v("Boolean类型，判断设备是否连接上网络。")]),t._m(8),s("p",[t._v("通常绑定在window上，当设备有网和没网之间切换时触发。")]),t._m(9),t._m(10),t._m(11),t._m(12),s("p",[t._v("网络类型")]),t._m(13),t._m(14),s("p",[t._v("有效连接类型")]),t._m(15),t._m(16),s("p",[t._v("有效带宽，M/s")]),t._m(17),s("p",[t._v("下行最大比特率")]),t._m(18),s("p",[t._v("往返时间（round-trip time）：表示从发送端发送数据开始，到发送端收到来自接收端的确认（接收端收到数据后便立即发送确认，不包含数据传输时间）总共经历的时间。")]),t._m(19),s("p",[t._v("很简单，当设备网络连接类型发生变化时触发该事件")]),t._m(20),s("p",[t._v("主要代码:")]),t._m(21),s("WebAPIs-Connection"),t._m(22),t._m(23),t._m(24),t._m(25),t._m(26),t._m(27)],1)},[function(){var t=this.$createElement,n=this._self._c||t;return n("h1",{attrs:{id:"几个有用的web-api——网络状态api"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#几个有用的web-api——网络状态api","aria-hidden":"true"}},[this._v("#")]),this._v(" 几个有用的Web API——网络状态API")])},function(){var t=this.$createElement,n=this._self._c||t;return n("p",[n("a",{attrs:{href:"https://denzel.netlify.com/js/useful_webapis_connection.html?_=0987654334523",target:"_blank",rel:"noopener noreferrer"}},[this._v("原文链接")])])},function(){var t=this.$createElement,n=this._self._c||t;return n("h2",{attrs:{id:"前言"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#前言","aria-hidden":"true"}},[this._v("#")]),this._v(" 前言")])},function(){var t=this.$createElement,n=this._self._c||t;return n("p",[this._v("像这样（手机UC浏览器）：\n"),n("img",{attrs:{src:"http://pn4meizzc.bkt.clouddn.com/blogWechatIMG491527678464_.pic.jpg",alt:"UC"}})])},function(){var t=this.$createElement,n=this._self._c||t;return n("p",[this._v("这样（手机QQ浏览器）：\n"),n("img",{attrs:{src:"http://pn4meizzc.bkt.clouddn.com/blogWechatIMG501527678489_.pic.jpg",alt:"QQ"}})])},function(){var t=this,n=t.$createElement,s=t._self._c||n;return s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{attrs:{class:"token comment"}},[t._v("//微信")]),t._v("\nWeixinJSBridge"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("invoke")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token string"}},[t._v("'getNetworkType'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" e "),s("span",{attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("   \n\t"),s("span",{attrs:{class:"token comment"}},[t._v("//blabla")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{attrs:{class:"token comment"}},[t._v("//小程序")]),t._v("\nwx"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("getNetworkType")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\tsuccess"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" res "),s("span",{attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),s("span",{attrs:{class:"token comment"}},[t._v("//blabla")]),t._v("\n\t"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("   \n")])])},function(){var t=this.$createElement,n=this._self._c||t;return n("h2",{attrs:{id:"online：一个属性两个事件"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#online：一个属性两个事件","aria-hidden":"true"}},[this._v("#")]),this._v(" onLine：一个属性两个事件")])},function(){var t=this.$createElement,n=this._self._c||t;return n("h3",{attrs:{id:"navigator-online"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#navigator-online","aria-hidden":"true"}},[this._v("#")]),this._v(" navigator.onLine:")])},function(){var t=this.$createElement,n=this._self._c||t;return n("h3",{attrs:{id:"online、offline事件"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#online、offline事件","aria-hidden":"true"}},[this._v("#")]),this._v(" online、offline事件")])},function(){var t=this,n=t.$createElement,s=t._self._c||n;return s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{attrs:{class:"token keyword"}},[t._v("var")]),t._v(" online "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" navigator"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("onLine"),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("  "),s("span",{attrs:{class:"token comment"}},[t._v("//是否在线")]),t._v("\n"),s("span",{attrs:{class:"token comment"}},[t._v("//事件绑定")]),t._v("\nwindow"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("addEventListener")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token string"}},[t._v("'online'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("  updateOnlineStatus"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nwindow"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("addEventListener")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token string"}},[t._v("'offline'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" updateOnlineStatus"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])},function(){var t=this.$createElement,n=this._self._c||t;return n("h2",{attrs:{id:"connection：一个对象一个事件"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#connection：一个对象一个事件","aria-hidden":"true"}},[this._v("#")]),this._v(" connection：一个对象一个事件")])},function(){var t=this.$createElement,n=this._self._c||t;return n("h3",{attrs:{id:"一个对象：navigator-connection"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#一个对象：navigator-connection","aria-hidden":"true"}},[this._v("#")]),this._v(" 一个对象：navigator.connection")])},function(){var t=this.$createElement,n=this._self._c||t;return n("h4",{attrs:{id:"type"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#type","aria-hidden":"true"}},[this._v("#")]),this._v(" type")])},function(){var t=this,n=t.$createElement,s=t._self._c||n;return s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("bluetooth"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 蓝牙\ncellular"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token function"}},[t._v("蜂窝网络")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("e"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("g"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{attrs:{class:"token constant"}},[t._v("EDGE")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{attrs:{class:"token constant"}},[t._v("HSPA")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{attrs:{class:"token constant"}},[t._v("LTE")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" etc"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nethernet"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 以太网\nnone"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 无连接\nmixed"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 多类型混合\nother"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 类型可知，但不可枚举\nunknown"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 有链接，但类型未知\nwifi"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Wi"),s("span",{attrs:{class:"token operator"}},[t._v("-")]),t._v("Fi\nwimax"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" WiMAX\n")])])},function(){var t=this.$createElement,n=this._self._c||t;return n("h4",{attrs:{id:"effectivetype"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#effectivetype","aria-hidden":"true"}},[this._v("#")]),this._v(" effectiveType")])},function(){var t=this,n=t.$createElement,s=t._self._c||n;return s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{attrs:{class:"token string"}},[t._v("'2g'")]),t._v("\n"),s("span",{attrs:{class:"token string"}},[t._v("'3g'")]),t._v("\n"),s("span",{attrs:{class:"token string"}},[t._v("'4g'")]),t._v("\n"),s("span",{attrs:{class:"token string"}},[t._v("'slow-2'")]),t._v("\n")])])},function(){var t=this.$createElement,n=this._self._c||t;return n("h4",{attrs:{id:"downlink"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#downlink","aria-hidden":"true"}},[this._v("#")]),this._v(" downlink")])},function(){var t=this.$createElement,n=this._self._c||t;return n("h4",{attrs:{id:"downlinkmax"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#downlinkmax","aria-hidden":"true"}},[this._v("#")]),this._v(" downlinkMax")])},function(){var t=this.$createElement,n=this._self._c||t;return n("h4",{attrs:{id:"rtt"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#rtt","aria-hidden":"true"}},[this._v("#")]),this._v(" rtt:")])},function(){var t=this.$createElement,n=this._self._c||t;return n("h3",{attrs:{id:"一个事件：-connection-onchange"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#一个事件：-connection-onchange","aria-hidden":"true"}},[this._v("#")]),this._v(" 一个事件： connection.onchange")])},function(){var t=this.$createElement,n=this._self._c||t;return n("h2",{attrs:{id:"demo"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#demo","aria-hidden":"true"}},[this._v("#")]),this._v(" Demo")])},function(){var t=this,n=t.$createElement,s=t._self._c||n;return s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),s("span",{attrs:{class:"token function"}},[t._v("onGetStatus")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),s("span",{attrs:{class:"token keyword"}},[t._v("if")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token operator"}},[t._v("!")]),s("span",{attrs:{class:"token keyword"}},[t._v("this")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("canUseConnection"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\t"),s("span",{attrs:{class:"token keyword"}},[t._v("this")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("$message"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("error")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token string"}},[t._v("'浏览器不支持navigator.connection（>_<）...'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\t"),s("span",{attrs:{class:"token keyword"}},[t._v("return")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\t\t"),s("span",{attrs:{class:"token keyword"}},[t._v("this")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("updateConnectionStatus")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\n\t"),s("span",{attrs:{class:"token function"}},[t._v("update")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),s("span",{attrs:{class:"token keyword"}},[t._v("this")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("connection "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" navigator"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("connection"),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\n\t"),s("span",{attrs:{class:"token function"}},[t._v("bindEvents")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),s("span",{attrs:{class:"token keyword"}},[t._v("let")]),t._v(" self "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("this")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\twindow"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("addEventListener")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token string"}},[t._v("'online'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" e "),s("span",{attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\tconsole"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("log")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("e"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\tself"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("updateOnlineStatus")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n\t\twindow"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("addEventListener")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token string"}},[t._v("'offline'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" e "),s("span",{attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\tconsole"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("log")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("e"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\tself"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("updateOnlineStatus")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n\t\t"),s("span",{attrs:{class:"token keyword"}},[t._v("if")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("navigator"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("connection"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\t"),s("span",{attrs:{class:"token keyword"}},[t._v("let")]),t._v(" timer "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("null")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\tnavigator"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("connection"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("addEventListener")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token string"}},[t._v("'change'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" e "),s("span",{attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\t\ttimer "),s("span",{attrs:{class:"token operator"}},[t._v("&&")]),t._v(" "),s("span",{attrs:{class:"token function"}},[t._v("clearTimeout")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("timer"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\t\ttimer "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token function"}},[t._v("setTimeout")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\t\t\tself"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("updateConnectionStatus")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("e"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\t\t"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{attrs:{class:"token number"}},[t._v("500")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\t"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\t"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\n\t"),s("span",{attrs:{class:"token function"}},[t._v("updateOnlineStatus")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),s("span",{attrs:{class:"token keyword"}},[t._v("this")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("online "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" navigator"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("onLine"),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\tconsole"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("log")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token keyword"}},[t._v("this")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("online"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t"),s("span",{attrs:{class:"token keyword"}},[t._v("if")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token keyword"}},[t._v("this")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("online"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\t"),s("span",{attrs:{class:"token keyword"}},[t._v("this")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("$message"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("success")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token string"}},[t._v("'有网啦❛‿˂̵✧'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\t"),s("span",{attrs:{class:"token keyword"}},[t._v("this")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("$message"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("error")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token string"}},[t._v("'掉线啦（>_<）...'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\t"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\n\t"),s("span",{attrs:{class:"token function"}},[t._v("updateConnectionStatus")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("e"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\tconsole"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("log")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("e"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t"),s("span",{attrs:{class:"token keyword"}},[t._v("this")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("connection "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" navigator"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("connection "),s("span",{attrs:{class:"token operator"}},[t._v("||")]),t._v(" initConnection"),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t"),s("span",{attrs:{class:"token keyword"}},[t._v("this")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("$notify"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("info")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\ttitle"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v("'提示'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      \t\tmessage"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v("'当前网络：'")]),t._v(" "),s("span",{attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("e "),s("span",{attrs:{class:"token operator"}},[t._v("?")]),t._v(" e"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("currentTarget"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("type "),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("this")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("connection"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("type "),s("span",{attrs:{class:"token operator"}},[t._v("||")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v("'unknown'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t\t"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])},function(){var t=this.$createElement,n=this._self._c||t;return n("p",[this._v("不支持navigator.connection，看不到效果？大概是这样子的（截图）——\n"),n("img",{attrs:{src:"http://pn4meizzc.bkt.clouddn.com/blog/WX20180531-115931@2x.png",alt:"demo截图"}})])},function(){var t=this.$createElement,n=this._self._c||t;return n("h2",{attrs:{id:"总结"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#总结","aria-hidden":"true"}},[this._v("#")]),this._v(" 总结")])},function(){var t=this.$createElement,n=this._self._c||t;return n("p",[this._v("由于兼容性的限制，现在能做的功能真的"),n("strong",[this._v("很——有——限")]),this._v("。")])},function(){var t=this.$createElement,n=this._self._c||t;return n("p",[this._v("但还是让我们寄希望于——"),n("strong",[this._v("未来")]),this._v("😄。")])},function(){var t=this.$createElement,n=this._self._c||t;return n("h2",{attrs:{id:"参考资料"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#参考资料","aria-hidden":"true"}},[this._v("#")]),this._v(" 参考资料")])},function(){var t=this.$createElement,n=this._self._c||t;return n("ul",[n("li",[n("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/Web/API/Network_Information_API",target:"_blank",rel:"noopener noreferrer"}},[this._v("Network Information API")])]),n("li",[n("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/Web/API/NavigatorOnLine/Online_and_offline_events",target:"_blank",rel:"noopener noreferrer"}},[this._v("Online and offline events")])]),n("li",[n("a",{attrs:{href:"http://wicg.github.io/netinfo/",target:"_blank",rel:"noopener noreferrer"}},[this._v("http://wicg.github.io/netinfo/")])])])}],!1,null,null,null);n.default=e.exports}}]);